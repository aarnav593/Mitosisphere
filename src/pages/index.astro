---
import { Image } from 'astro:assets';
import Layout from '../layouts/Layout.astro';
---

<Layout title="Mitosisphere ‚Äî Multiplying Success, One Division at a Time">
  <!-- Firework Container -->
  <div id="fireworks-container"></div>

  <!-- Popup Overlay -->
  <div class="popup-overlay" id="popup-overlay">
    <div class="popup-content" id="popup-content">
      <div class="popup-inner">
        <!-- Content will be inserted dynamically -->
      </div>
    </div>
  </div>

  <nav id="nav">
    <div class="nav-content">
      <div class="logo">
        <img src="/logo.png" alt="Mitosisphere Logo">
        Mitosisphere
      </div>
      <div class="nav-links">
        <a>Home</a>
        <a>Initiatives</a>
        <a>Competitions</a>
        <a>Team</a>
        <a>Partners</a>
      </div>
    </div>
  </nav>

  <section id="hero">
    <div class="orb orb1"></div>
    <div class="orb orb2"></div>
    
    <div class="dna-helix">
      <div class="dna-strand">
        <div class="base-pair" style="top: 0%; animation-delay: 0s;"></div>
        <div class="base-pair" style="top: 10%; animation-delay: 0.2s;"></div>
        <div class="base-pair" style="top: 20%; animation-delay: 0.4s;"></div>
        <div class="base-pair" style="top: 30%; animation-delay: 0.6s;"></div>
        <div class="base-pair" style="top: 40%; animation-delay: 0.8s;"></div>
        <div class="base-pair" style="top: 50%; animation-delay: 1s;"></div>
        <div class="base-pair" style="top: 60%; animation-delay: 1.2s;"></div>
        <div class="base-pair" style="top: 70%; animation-delay: 1.4s;"></div>
        <div class="base-pair" style="top: 80%; animation-delay: 1.6s;"></div>
        <div class="base-pair" style="top: 90%; animation-delay: 1.8s;"></div>
      </div>
    </div>
    
    <div class="hero-content">
      <div class="hero-badge">üéâ Start Your Year Dividing & Conquering!</div>
      <div class="typing-title">
        <div class="typing-line" id="typingText"></div>
        <span class="cursor"></span>
      </div>
      <p class="hero-subtitle">
        We create expert-designed resources for advanced biology. Join 1000+ students from 19 countries mastering USABO.
      </p>
      <div class="hero-buttons">
        <a class="btn btn-primary">
          Explore Resources ‚Üí
        </a>
        <a href="https://discord.gg/Sq3nTXyS6D" target="_blank" class="stat-link">
          Join our Discord ‚Üí
        </a>
      </div>
    </div>
  </section>

  <section id="stats">
    <div class="cell-animation" style="left: 8%; top: 50%;">
      <div class="cell" style="animation-delay: 0s;"></div>
      <div class="cell" style="animation-delay: 1s; border-color: var(--blue);"></div>
    </div>

    <div class="stats-container">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number" data-target="1000">0</div>
          <div class="stat-label">Competition Participants<br>from 19 Countries</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" data-target="553">0</div>
          <div class="stat-label">Active Community Members</div>
          <a href="https://discord.gg/Sq3nTXyS6D" target="_blank" class="stat-link">
            <span class="discord-icon"></span>
            Join our Discord ‚Üí
          </a>
        </div>
      </div>
    </div>
    
    <div class="cell-animation" style="right: 8%; left: auto; top: 50%;">
      <div class="cell" style="animation-delay: 0.5s; border-color: var(--indigo);"></div>
      <div class="cell" style="animation-delay: 1.5s;"></div>
    </div>
  </section>

  <section id="featured-guide">
    <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px; width: 100%;">
      <div class="section-title" style="margin-bottom: 40px;">
        <h2><span class="typing-line">Featured Resources</span></h2>
      </div>

      <div class="featured-resources-grid">
        <!-- Lamnhaj's Guide -->
        <div class="featured-resource-card">
          <div class="resource-badge">First Edition Out!</div>
          <h3>Lamnhaj's Guide to USABO (Second Edition)</h3>
          <p>The ultimate USABO textbook, featuring high-yield topics, proven study strategies, and hundreds of practice problems with detailed solutions. Second edition with hundreds more practice problems out now!</p>
          <a href="https://guide.mitosisphere.org" class="btn btn-primary">Read Now</a>
        </div>

        <!-- BioBlitz -->
        <div class="featured-resource-card">
          <div class="resource-badge resource-badge-new">Just Released!</div>
          <h3>BioBlitz</h3>
          <p>Competitive biology game to sharpen your skills while climbing the ELO leaderboards. Challenge yourself and compete with students worldwide!</p>
          <a href="https://bioblitz.net" target="_blank" class="btn btn-primary">Play Now</a>
        </div>
      </div>
    </div>
  </section>

  <section id="initiatives">
    <div class="section-title">
      <h2><span class="typing-line">Our Initiatives</span></h2>
      <p>Comprehensive programs to power your biology journey</p>
    </div>

    <div class="carousel-container">
      <div class="carousel" id="carousel">
        <div class="initiative-card active">
          <div class="initiative-icon">üèÜ</div>
          <h3>Competitions</h3>
          <div class="initiative-status">Active</div>
          <p>Challenge yourself with our comprehensive competition suite: p+q series (Open & Semifinals), BioBowl (Science Bowl format), and Monthly Challenges for continuous practice throughout the year.</p>
        </div>

        <div class="initiative-card">
          <div class="initiative-icon">üìÖ</div>
          <h3>Monthly Challenges</h3>
          <div class="initiative-status">Running</div>
          <p>Stay sharp year-round! New question sets every month with varied difficulty levels, community discussions, and detailed solutions to keep your skills fresh.</p>
        </div>

        <div class="initiative-card">
          <div class="initiative-icon">‚ö°</div>
          <h3>BioBlitz</h3>
          <div class="initiative-status initiative-status-live">Live Now!</div>
          <p>Competitive biology game now available! Sharpen your skills while increasing your ELO and climbing the ranking leaderboards.</p>
          <a href="https://bioblitz.net" target="_blank" class="btn btn-secondary" style="margin-top: 15px;">
            Play Now ‚Üí
          </a>
        </div>

        <div class="initiative-card">
          <div class="initiative-icon">ü§ù</div>
          <h3>Mentorship Program</h3>
          <div class="initiative-status">Active</div>
          <p>Free personalized coaching from IBO medalists and ISEF finalists. Get expert guidance on USABO preparation, research competitions, internship applications, and more.</p>
          <a href="https://docs.google.com/forms/d/e/1FAIpQLSeNus46S6bVyhOg34M5q6AKYT6MIoIsTjNDT9EixfXXbRxBCw/viewform" target="_blank" class="btn btn-secondary" style="margin-top: 15px;">
            Apply Now
          </a>
        </div>

        <div class="initiative-card">
          <div class="initiative-icon">üéì</div>
          <h3>USABO Webinars</h3>
          <div class="initiative-status">Active</div>
          <p>Learn from experienced researchers and competitors. Regular sessions covering research methods, finding mentors, preparing for science fairs, and advanced biology topics. Hosted on Discord.</p>
        </div>
      </div>

      <div class="carousel-nav">
        <button class="carousel-dot active"></button>
        <button class="carousel-dot"></button>
        <button class="carousel-dot"></button>
        <button class="carousel-dot"></button>
        <button class="carousel-dot"></button>
      </div>
    </div>
  </section>

  <section id="competitions">
    <div class="competitions-container">
      <div class="section-title">
        <h2><span class="typing-line">Our Competitions</span></h2>
        <p>Challenge yourself with USABO-style exams and more</p>
      </div>

      <div class="competition-main">
        <div class="competition-header">
          <h3><span class="typing-line">p+q Competition Series</span></h3>
          <p style="color: var(--text-muted); font-size: 18px;">Annual USABO-style exams for students worldwide</p>
          <p style="color: var(--text-muted); font-size: 16px; margin-top: 10px;">Open to high school students globally, our exams will take place online. They will be available to take all day. Explore the complete guidelines in our official rules document!</p>
        </div>

        <div class="p-q-grid">
          <div class="p-q-round">
            <div class="latex-formula">\(p + q = 1\)</div>
            <h4>Open Round</h4>
            <p>First round mirroring USABO Open difficulty. 50 multiple-choice questions in 50 minutes with 5 choices per question.</p>
            <a href="https://forms.gle/7oaq31kiAhSstxwY6" target="_blank" class="btn btn-secondary">
              Register
            </a>
          </div>

          <div class="p-q-round">
            <div class="latex-formula">\((p + q)^2 = 1\)</div>
            <h4>Semifinal Round</h4>
            <p>Second round corresponding to USABO Semifinals. 100 questions in 120 minutes: 65 multiple-choice and 35 multiple-true/false.</p>
            <div style="margin-top: 15px; padding: 10px; background: rgba(154, 80, 216, 0.1); border-radius: 8px; color: var(--purple); font-size: 14px; font-weight: 600;">
              ‚≠ê Qualification Required (Top performers from Open Round)
            </div>
          </div>
        </div>

        <div style="text-align: center; margin-top: 30px; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
          <a href="https://forms.gle/7oaq31kiAhSstxwY6" target="_blank" class="btn btn-primary">
            Get Competition Updates
          </a>
          <a href="/assets/rules.pdf" target="_blank" class="btn btn-secondary">
            Read the Rules
          </a>
        </div>
      </div>

      <div class="other-competitions">
        <div class="other-comp-card">
          <div class="comp-icon">üéØ</div>
          <h4>Mitosisphere BioBowl</h4>
          <p>Science Bowl format adapted for biology. Fast-paced team competition testing your quick recall and deep understanding of biological concepts.</p>
        </div>

        <div class="other-comp-card">
          <div class="comp-icon">üìÖ</div>
          <h4>Monthly Challenges</h4>
          <p>New question sets released every month with varied difficulty. Practice consistently, discuss with the community, and track your improvement.</p>
        </div>
      </div>
    </div>
  </section>

  <section id="team">
   <div class="team-container">
     <div class="section-title">
       <h2><span class="typing-line">Meet Our Team</span></h2>
       <p>Passionate students building resources for the biology community</p>
     </div>

    <center> <div class="tier-title">Presidents</div></center>
<div class="leadership-grid"
     style="display:grid; grid-template-columns: repeat(3, 1fr); justify-items:center; align-items:start;">

  <!-- Jake (between col 1 & 2) -->
  <div class="team-member"
       style="grid-column: 1 / span 2; grid-row: 1; justify-self:center;">
    <div class="member-avatar">
      <img src="/assets/team/jake-rosenblum.jpg" alt="Jake Rosenblum"
           onerror="this.style.display='none'; this.parentElement.textContent='JR';">
    </div>
    <div class="member-name">Jake Rosenblum</div>
    <div class="member-role">Co-President</div>
  </div>

  <!-- Shriyan (between col 2 & 3) -->
  <div class="team-member"
       style="grid-column: 2 / span 2; grid-row: 1; justify-self:center;">
    <div class="member-avatar">
      <img src="/assets/team/shriyan-junnuthulla.jpg" alt="Shriyan Junnuthulla"
           onerror="this.style.display='none'; this.parentElement.textContent='SJ';">
    </div>
    <div class="member-name">Shriyan Junnuthulla</div>
    <div class="member-role">Co-President</div>
  </div>

</div>




     <div class="org-connector"></div>

     <div class="leadership-tier">
       <div class="tier-title">Section Leads</div>
       <div class="leadership-grid">
         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/srikar-reddy.jpg" alt="Srikar Reddy" onerror="this.style.display='none'; this.parentElement.textContent='SR';">
           </div>
           <div class="member-name">Srikar Reddy</div>
           <div class="member-role">Head of Content</div>
         </div>
         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/aarnav-suwal.jpg" alt="Aarnav Suwal" onerror="this.style.display='none'; this.parentElement.textContent='AS';">
           </div>
           <div class="member-name">Aarnav Suwal</div>
           <div class="member-role">Chief Technology Officer</div>
         </div>
         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/candace-pun.jpg" alt="Candace Pun" onerror="this.style.display='none'; this.parentElement.textContent='CP';">
           </div>
           <div class="member-name">Candace Pun</div>
           <div class="member-role">Head of Outreach</div>
         </div>
       </div>
     </div>

     <div class="org-connector"></div>

     <div class="leadership-tier">
       <div class="tier-title">Team Members</div>
       <div class="team-grid">
           <div class="team-member">
            <div class="member-avatar">
             <img src="/assets/team/eric-liu.jpg" alt="Eric Liu" onerror="this.style.display='none'; this.parentElement.textContent='EL';">
           </div>
           <div class="member-name">Eric Liu</div>
           <div class="member-role">Content Team</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/donelly-qin.jpg" alt="Donelly Qin" onerror="this.style.display='none'; this.parentElement.textContent='DQ';">
           </div>
           <div class="member-name">Donelly Qin</div>
           <div class="member-role">Content Team</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/Sid.png" alt="Siddhanth Venkatesan" onerror="this.style.display='none'; this.parentElement.textContent='SV';">
           </div>
           <div class="member-name">Siddhanth Venkatesan</div>
           <div class="member-role">Content Team</div>
         </div>

          <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/aniketh_gudi.jpg" alt="Aniketh Gudi" onerror="this.style.display='none'; this.parentElement.textContent='AG';">
           </div>
           <div class="member-name">Aniketh Gudi</div>
           <div class="member-role">Content Team</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/dipisha-subedi.jpg" alt="Dipisha Subedi" onerror="this.style.display='none'; this.parentElement.textContent='DS';">
           </div>
           <div class="member-name">Dipisha Subedi</div>
           <div class="member-role">Technology Team</div>
         </div>
         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/elijah-feldman.jpg" alt="Elijah Feldman" onerror="this.style.display='none'; this.parentElement.textContent='EF';">
           </div>
           <div class="member-name">Elijah Feldman</div>
           <div class="member-role">Technology Team</div>
         </div>
         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/yuva-gade.jpg" alt="Yuva Gade" onerror="this.style.display='none'; this.parentElement.textContent='YG';">
           </div>
           <div class="member-name">Yuva Gade</div>
           <div class="member-role">Technology Team</div>
         </div>
  
         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/dermot-lu.jpg" alt="Dermot Lu" onerror="this.style.display='none'; this.parentElement.textContent='DL';">
           </div>
           <div class="member-name">Dermot Lu</div>
           <div class="member-role">Technology Team</div>
         </div>

         <div class="team-member">
            <div class="member-avatar">
             <img src="/assets/team/mihir_kashyap.jpg" alt="Mihir Kashyap" onerror="this.style.display='none'; this.parentElement.textContent='MK';">
           </div>
           <div class="member-name">Mihir Kashyap</div>
           <div class="member-role">Technology Team</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/yogan-mahesh.jpg" alt="Yogan Mahesh" onerror="this.style.display='none'; this.parentElement.textContent='YM';">
           </div>           
           <div class="member-name">Yogan Mahesh</div>
           <div class="member-role">Outreach Team</div>
         </div>

         <div class="team-member">
            <div class="member-avatar">
             <img src="/assets/team/kiaan-saraiya.jpg" alt="Kiaan Saraiya" onerror="this.style.display='none'; this.parentElement.textContent='KS';">
           </div>                
           <div class="member-name">Kiaan Saraiya</div>
           <div class="member-role">Outreach Team</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/rosa-lee.jpg" alt="Rosa Lee" onerror="this.style.display='none'; this.parentElement.textContent='RL';">
           </div>    
           <div class="member-name">Rosa Lee</div>
           <div class="member-role">Outreach Team</div>
         </div>

            <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/Arnav.png" alt="Arnav Dusad" onerror="this.style.display='none'; this.parentElement.textContent='AD';">
           </div>
           <div class="member-name">Arnav Dusad</div>
           <div class="member-role">Outreach Team</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/abdus-samad-shaik.jpg" alt="Abdus-Samad Shaik" onerror="this.style.display='none'; this.parentElement.textContent='AS';">
           </div>
           <div class="member-name">Abdus-Samad Shaik</div>
           <div class="member-role">Content & Outreach Teams</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/abbie-affum.jpg" alt="Abbie Affum" onerror="this.style.display='none'; this.parentElement.textContent='AA';">
           </div>
           <div class="member-name">Abbie Affum</div>
           <div class="member-role">Community Engagement Team</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/sarah-park.jpg" alt="Sarah Park" onerror="this.style.display='none'; this.parentElement.textContent='SP';">
           </div>
           <div class="member-name">Sarah Park</div>
           <div class="member-role">Community Engagement Team</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/tol-prasad.jpg" alt="Tol Prasad Kafle" onerror="this.style.display='none'; this.parentElement.textContent='TP';">
           </div>
           <div class="member-name">Tol Prasad Kafle</div>
           <div class="member-role">Nepal Branch Head</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/jason-yan.jpg" alt="Jason Yan" onerror="this.style.display='none'; this.parentElement.textContent='JY';">
           </div>
           <div class="member-name">Jason Yan</div>
           <div class="member-role">Outreach Team</div>
         </div>

         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/deepak-praveen-kumar.png" alt="Deepak Praveen Kumar" onerror="this.style.display='none'; this.parentElement.textContent='DP';">
           </div>
           <div class="member-name">Deepak Praveen Kumar</div>
           <div class="member-role">India Branch Head</div>
         </div>
       </div>
     </div>

     <div class="org-connector"></div>

     <div class="leadership-tier">
       <div class="tier-title">Advisory Board</div>
       <div class="leadership-grid">
         <div class="team-member">
           <div class="member-avatar">
             <img src="/assets/team/ethan-guo.jpg" alt="Ethan Guo" onerror="this.style.display='none'; this.parentElement.textContent='EG';">
           </div>
           <div class="member-name">Ethan Guo</div>
           <div class="member-role">Founder & Advisor</div>
         </div>
       </div>
     </div>

     <div class="join-team-cta" style="margin-top: 80px;">
       <h3>üéâ Join Our Team!</h3>
       <p>Help us expand our outreach and help create amazing resources! Leadership positions will become vacant in a few months, and we will fill them from our staff. If you have management or leadership ability (or are interested in marketing and outreach), we encourage you to join us!</p>
       <a href="https://forms.gle/jePabrYs13KvFSqt9" target="_blank" class="btn btn-primary">
         Apply to Join Staff
       </a>
     </div>
   </div>
 </section>

   <section id="partners">
    <div class="partners-container">
      <div class="section-title" style="margin-left: 0;">
        <h2><span class="typing-line">Our Partners</span></h2>
        <p>Thank you for helping us reach a wider audience</p>
      </div>

      <div class="partners-grid">
        <div class="partner-card">
          <img src="/partners/bods.png" alt="Biology Olympiads Discord Server Logo" />
        </div>
        <div class="partner-card">
          <img src="/partners/pandorax.png" alt="Pandorax Logo" />
        </div>
        <div class="partner-card">
          <img src="/partners/sciovirtual.png" alt="ScioVirtual Logo" />
        </div>
        <div class="partner-card">
          <img src="/partners/baologyLogo.png" alt="Biology Prep Logo" />
        </div>
      </div>
    </div>
  </section>

<script is:inline>
  (function() {
    // FIREWORKS
    function createFirework() {
      const container = document.getElementById('fireworks-container');
      if (!container) return;
      
      const x = Math.random() * window.innerWidth;
      const y = Math.random() * (window.innerHeight * 0.6) + (window.innerHeight * 0.1);
      
      const particleCount = 12 + Math.floor(Math.random() * 8);
      const colors = ['#9A50D8', '#3FB8D3', '#6A6AD4', '#a855f7', '#60a5fa'];
      const baseColor = colors[Math.floor(Math.random() * colors.length)];
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'firework-particle';
        
        const angle = (Math.PI * 2 * i) / particleCount;
        const velocity = 50 + Math.random() * 50;
        const tx = Math.cos(angle) * velocity;
        const ty = Math.sin(angle) * velocity;
        
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        particle.style.setProperty('--tx', tx + 'px');
        particle.style.setProperty('--ty', ty + 'px');
        particle.style.background = baseColor;
        particle.style.boxShadow = `0 0 8px ${baseColor}`;
        
        container.appendChild(particle);
        setTimeout(() => particle.remove(), 2000);
      }
    }
    
    setInterval(createFirework, 3000);
    
    // PRESENT BOXES
    function initPresentBoxes() {
      const bioblitzBox = document.getElementById('present-bioblitz');
      const guideBox = document.getElementById('present-guide');
      const overlay = document.getElementById('popup-overlay');
      const popupContent = document.getElementById('popup-content');
      
      function handleBoxClick(box, popupType) {
        let clicks = parseInt(box.getAttribute('data-clicks'));
        clicks++;
        box.setAttribute('data-clicks', clicks);
        
        box.classList.add('shaking');
        setTimeout(() => box.classList.remove('shaking'), 500);
        
        if (clicks >= 3) {
          box.classList.add('opening');
          setTimeout(() => {
            showPopup(popupType);
            box.style.display = 'none';
          }, 800);
        }
      }
      
      function showPopup(type) {
        const inner = popupContent.querySelector('.popup-inner');
        
        if (type === 'bioblitz') {
          inner.innerHTML = `
            <div class="popup-icon">‚ö°</div>
            <h2>BioBlitz is Live!</h2>
            <p>Our competitive biology game just launched! Challenge yourself, climb the ELO leaderboards, and compete with students worldwide.</p>
            <a href="https://bioblitz.net" target="_blank" class="btn btn-primary">Play Now</a>
          `;
        } else {
          inner.innerHTML = `
            <div class="popup-icon">üìö</div>
            <h2>Lamnhaj's Guide Available!</h2>
            <p>The ultimate USABO textbook is here! Featuring high-yield topics, proven strategies, and hundreds of practice problems. Second Edition is here!</p>
            <a href="https://guide.mitosisphere.org" target="_blank" class="btn btn-primary">Read Now</a>
          `;
        }
        
        overlay.classList.add('show');
        popupContent.classList.add('show');
      }
      
      function closePopup(e) {
        if (e.target === overlay || e.target.closest('.popup-inner') === null) {
          overlay.classList.remove('show');
          popupContent.classList.remove('show');
        }
      }
      
      if (bioblitzBox) {
        bioblitzBox.addEventListener('click', () => handleBoxClick(bioblitzBox, 'bioblitz'));
      }
      
      if (guideBox) {
        guideBox.addEventListener('click', () => handleBoxClick(guideBox, 'guide'));
      }
      
      if (overlay) {
        overlay.addEventListener('click', closePopup);
      }
    }
    
    // TYPING
    const text = "Multiplying Success, One Division at a Time.";
    let charIndex = 0;

    function typeText() {
      const typingElement = document.getElementById('typingText');
      if (typingElement && charIndex < text.length) {
        typingElement.textContent += text[charIndex];
        charIndex++;
        setTimeout(typeText, 80);
      }
    }

    setTimeout(typeText, 500);

    // SCROLL
    function scrollToSection(id) {
      const section = document.getElementById(id);
      if (section) {
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    // COUNTER
    function animateCounter(element) {
      const target = parseInt(element.getAttribute('data-target') || '0');
      const duration = 2000;
      const increment = target / (duration / 16);
      let current = 0;

      const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
          element.textContent = target + '+';
          clearInterval(timer);
        } else {
          element.textContent = Math.floor(current) + '+';
        }
      }, 16);
    }

    // OBSERVERS
    const allSections = document.querySelectorAll('section');
    const sectionObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('in-view');
        } else {
          if (entry.target.id !== 'hero') {
            entry.target.classList.remove('in-view');
          }
        }
      });
    }, {
      threshold: 0.5,
      rootMargin: '0px'
    });

    allSections.forEach(section => {
      sectionObserver.observe(section);
    });

    const statsObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const counter = entry.target.querySelector('.stat-number');
          if (counter && counter.textContent === '0') {
            animateCounter(counter);
          }
        }
      });
    }, { threshold: 0.5 });

    document.querySelectorAll('.stat-card').forEach(el => statsObserver.observe(el));

    // CAROUSEL
    let currentSlide = 0;
    const slides = document.querySelectorAll('.initiative-card');
    const dots = document.querySelectorAll('.carousel-dot');
    const totalSlides = slides.length;
    let autoRotate;

    function updateCarousel() {
      slides.forEach((slide, index) => {
        slide.classList.remove('active', 'prev', 'next');
        
        if (index === currentSlide) {
          slide.classList.add('active');
        } else if (index === (currentSlide - 1 + totalSlides) % totalSlides) {
          slide.classList.add('prev');
        } else if (index === (currentSlide + 1) % totalSlides) {
          slide.classList.add('next');
        }
      });

      dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentSlide);
      });
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % totalSlides;
      updateCarousel();
    }

    function goToSlide(index) {
      currentSlide = index;
      updateCarousel();
      resetAutoRotate();
    }

    function startAutoRotate() {
      autoRotate = setInterval(nextSlide, 7000);
    }

    function resetAutoRotate() {
      clearInterval(autoRotate);
      startAutoRotate();
    }

    updateCarousel();
    startAutoRotate();

    const carouselContainer = document.querySelector('.carousel-container');
    if (carouselContainer) {
      carouselContainer.addEventListener('mouseenter', () => {
        clearInterval(autoRotate);
      });
      
      carouselContainer.addEventListener('mouseleave', () => {
        startAutoRotate();
      });
    }

    // INIT
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initEventListeners);
    } else {
      initEventListeners();
    }

    function initEventListeners() {
      const logo = document.querySelector('.logo');
      if (logo) {
        logo.addEventListener('click', () => scrollToSection('hero'));
      }

      const navLinks = document.querySelectorAll('.nav-links a');
      navLinks.forEach(link => {
        link.addEventListener('click', function() {
          const section = this.textContent.toLowerCase();
          const sectionMap = {
            'home': 'hero',
            'initiatives': 'featured-guide',
            'competitions': 'competitions',
            'partners': 'partners',
            'team': 'team'
          };
          scrollToSection(sectionMap[section]);
        });
      });

      const exploreBtn = document.querySelector('.hero-buttons a.btn-primary');
      if (exploreBtn && exploreBtn.textContent.includes('Explore')) {
        exploreBtn.addEventListener('click', (e) => {
          e.preventDefault();
          scrollToSection('featured-guide');
        });
      }

      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => goToSlide(index));
      });

      initPresentBoxes();
    }
    
    if (typeof window !== 'undefined') {
      window.MathJax = {
        tex: {
          inlineMath: [['\\(', '\\)']],
          displayMath: [['\\[', '\\]']]
        }
      };
    }
  })();
</script>
</Layout>
