---
import Container from "@components/container.astro";
import Link from "@components/ui/link.astro";
import Dropdown from "./dropdown.astro";
import { Astronav, MenuItems, MenuIcon } from "astro-navbar";

const menuitems = [
  {
    title: "Home",
    path: "/",
  },
  {
    title: "Initiatives",
    path: "/initiatives",
  },
  {
    title: "Competitions",
    path: "/competitions",
  },
  
  {
    title: "Team",
    path: "/team",
  },
];
---
<style>
  /* These styles match the variables from your main page for consistency */
  :root {
    --color-logo-text: #6A6AD4;
    --color-heading: #1E293B;
    --color-body: #475569;
    --color-border: #E2E8F0;
    --color-bg-hover: #F8FAFC;
  }
</style>

<header id="navbar" class="sticky top-0 z-50 w-full bg-white/80 backdrop-blur-lg border-b border-slate-200">
  <Container>
    <div class="flex flex-col lg:flex-row justify-between items-center py-3">
      <Astronav>
        <div class="flex w-full lg:w-auto items-center justify-between">
          <a href="/" class="text-lg flex items-center">
            <img src="/logo.png" class="h-10 w-10 mr-3 rounded-md" alt="Mitosisphere Logo" />
            <span class="font-bold text-lg text-slate-800">
              Mitosisphere
            </span>
          </a>
          <div class="block lg:hidden">
            <MenuIcon class="w-6 h-6 text-slate-700" />
          </div>
        </div>
        
        <MenuItems class="hidden w-full lg:w-auto mt-2 lg:mt-0 lg:flex absolute lg:relative top-full left-0">
          <ul class="flex flex-col lg:flex-row lg:gap-1 bg-white lg:bg-transparent shadow-md lg:shadow-none rounded-lg p-2 lg:p-0 border border-slate-200 lg:border-none">
            {
              menuitems.map((item) => (
                <li>
                  <a
                    href={item.path}
                    id={item.path}
                    class="navitem flex px-3 py-2 items-center text-base font-medium rounded-md text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-colors duration-200 is-active:bg-slate-100 is-active:text-[var(--color-logo-text)] is-active:font-semibold"
                  >
                    <span>{item.title}</span>
                  </a>
                </li>
              ))
            }
          </ul>
        </MenuItems>
      </Astronav>
    </div>
  </Container>
</header>

<script>
  function highlightActiveLink() {
    const navitems = document.querySelectorAll(".navitem");
    const currentPath = window.location.pathname.endsWith('/') && window.location.pathname.length > 1 ? window.location.pathname.slice(0, -1) : window.location.pathname;
    
    navitems.forEach(navitem => {
      const itemPathAttr = navitem.getAttribute('id');
      const itemPath = itemPathAttr!.endsWith('/') && itemPathAttr!.length > 1 ? itemPathAttr!.slice(0, -1) : itemPathAttr;

      navitem.classList.remove("is-active");

      if (currentPath === itemPath) {
        navitem.classList.add("is-active");
      }
    });
  }
  
  document.addEventListener('astro:page-load', highlightActiveLink);
</script>